/**
 * Page Sidebar Styles
 * Theme-aware responsive sidebar for documentation pages
 */

/* ========================================
   Sidebar Container
   ======================================== */

#page-sidebar {
  // Mobile: full width, below content
  width: 100%;

  // Desktop: sticky sidebar with independent scroll
  @media (min-width: 1024px) {
    position: sticky;
    top: 2rem;
    align-self: flex-start;
    max-height: calc(100vh - 4rem);
    overflow-y: auto;

    // Custom scrollbar styling
    &::-webkit-scrollbar {
      width: 6px;
    }

    &::-webkit-scrollbar-track {
      background: var(--bg-primary);
      border-radius: var(--radius-sm);
    }

    &::-webkit-scrollbar-thumb {
      background: var(--border-primary);
      border-radius: var(--radius-sm);
      transition: background var(--transition-fast);

      &:hover {
        background: var(--link-base);
      }
    }
  }
}

/* ========================================
   Mobile Toggle Button
   ======================================== */

#sidebar-toggle {
  border: 1px solid var(--border-primary);
  transition: all var(--transition-fast);

  &:hover {
    background: var(--ui-hover);
    border-color: var(--link-base);
  }

  &:focus-visible {
    outline: 2px solid var(--ui-focus);
    outline-offset: 2px;
  }

  svg {
    transition: transform var(--transition-base);
  }
}

/* ========================================
   Sidebar Content Container
   ======================================== */

#sidebar-content {
  // Smooth height transitions for mobile collapse
  transition: all var(--transition-base);
}

/* ========================================
   Widget Styling (Inline styles handled in includes)
   Additional cross-widget styles here
   ======================================== */

// Widget spacing and consistency
.toc-widget,
.audio-widget,
.video-widget,
.references-widget {
  // Prevent sidebar content from being too wide on mobile
  max-width: 100%;
  overflow-x: hidden;
}

// Ensure all buttons have consistent focus states
.timestamp-btn,
.video-thumbnail-btn {
  &:hover {
    background: var(--ui-hover) !important;
    border-color: var(--link-base) !important;
    cursor: pointer;
  }

  &:active {
    transform: translateY(1px);
  }

  &:focus-visible {
    outline: 2px solid var(--ui-focus) !important;
    outline-offset: 2px;
  }
}

// Video embed responsive iframe
.video-embed iframe {
  width: 100%;
  aspect-ratio: 16 / 9;
  border: none;
}

/* ========================================
   Empty State Styling
   ======================================== */

#sidebar-content > div[style*="background: var(--bg-secondary)"] {
  border: 1px dashed var(--border-primary);
  opacity: 0.8;
}

/* ========================================
   Accessibility Enhancements
   ======================================== */

// Skip link for sidebar (optional - for keyboard nav)
.skip-to-sidebar {
  position: absolute;
  left: -9999px;
  z-index: 999;

  &:focus {
    left: 0;
    top: 0;
    background: var(--bg-primary);
    color: var(--text-primary);
    padding: var(--space-md);
    border: 2px solid var(--ui-focus);
  }
}

/* ========================================
   Print Styles
   ======================================== */

@media print {
  #page-sidebar {
    display: none; // Hide sidebar when printing
  }

  main {
    width: 100% !important;
  }
}

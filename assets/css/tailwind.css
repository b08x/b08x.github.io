@import "tailwindcss";
@config "../../tailwind.config.js";

@theme {
    --color-prose-body: var(--foreground);
    --color-prose-headings: var(--foreground);
    --color-prose-lead: var(--foreground);
    --color-prose-links: var(--accent);
    --color-prose-bold: var(--foreground);
    --color-prose-counters: var(--muted);
    --color-prose-bullets: var(--muted);
    --color-prose-hr: var(--border);
    --color-prose-quotes: var(--foreground);
    --color-prose-quote-borders: var(--accent);
    --color-prose-captions: var(--muted);
    --color-prose-code: var(--foreground);
    --color-prose-pre-code: var(--foreground);
    --color-prose-pre-bg: var(--bg-code);
    --color-prose-th-borders: var(--border);
    --color-prose-td-borders: var(--border);
}

@layer components {

    /* Backlink Box - migrated from _style.scss */
    .backlink-box {
        @apply bg-surface p-4 rounded border border-border;
    }

    /* Invalid Link Styling - migrated from _style.scss */
    .invalid-link {
        @apply text-muted cursor-help px-1;
        background: rgba(74, 74, 74, 0.5);
    }

    .invalid-link-brackets {
        @apply text-muted cursor-help;
    }

    /* Theme Toggle Button - migrated from nav.html inline styles */
    .theme-toggle-btn {
        @apply bg-surface border border-border rounded-md p-2 cursor-pointer;
        @apply flex items-center justify-center;
        @apply transition-all duration-fast;
    }

    .theme-toggle-btn:hover {
        @apply bg-popover scale-105;
    }

    .theme-toggle-btn:active {
        @apply scale-95;
    }

    /* Scroll-Up Navigation Header - Auto-hiding header on scroll */
    #site-header.header-hidden {
        transform: translateY(-100%);
    }

    /* ========================================
       CODE BLOCK STYLING - Migrated from _sass/_code.scss
       Rouge syntax highlighting for terminal theme
       ======================================== */

    .highlight {
        background: var(--bg-code);
        border: 1px solid var(--border);
        padding: 1em;
        border-radius: var(--radius-md);
        font-size: 0.9em;
        overflow: auto;
        margin: 1em 0;
    }

    .highlight code {
        padding: 0;
        background: transparent;
        border: none;
        white-space: pre-wrap;
    }

    div.highlight {
        display: grid;
    }

    .highlight .c { color: var(--muted); font-style: italic; }
    .highlight .err { color: var(--chart-5); background-color: rgba(255, 68, 102, 0.15); }
    .highlight .k { color: var(--accent); font-weight: bold; }
    .highlight .o { color: var(--chart-1); font-weight: normal; }
    .highlight .cm { color: var(--muted); font-style: italic; }
    .highlight .cp { color: var(--muted); font-weight: bold; }
    .highlight .c1 { color: var(--muted); font-style: italic; }
    .highlight .cs { color: var(--muted); font-weight: bold; font-style: italic; }
    .highlight .gd { color: var(--chart-5); background-color: rgba(255, 68, 102, 0.15); }
    .highlight .gd .x { color: var(--chart-5); background-color: rgba(255, 68, 102, 0.2); }
    .highlight .ge { font-style: italic; }
    .highlight .gr { color: var(--chart-5); }
    .highlight .gh { color: var(--foreground); font-weight: bold; }
    .highlight .gi { color: var(--chart-3); background-color: rgba(80, 200, 120, 0.15); }
    .highlight .gi .x { color: var(--chart-3); background-color: rgba(80, 200, 120, 0.2); }
    .highlight .go { color: var(--muted); }
    .highlight .gp { color: var(--muted); }
    .highlight .gs { font-weight: bold; }
    .highlight .gu { color: var(--accent); }
    .highlight .gt { color: var(--chart-5); }
    .highlight .kc { font-weight: bold; color: var(--accent); }
    .highlight .kd { font-weight: bold; color: var(--accent); }
    .highlight .kp { font-weight: bold; color: var(--accent); }
    .highlight .kr { font-weight: bold; color: var(--accent); }
    .highlight .kt { color: var(--chart-2); font-weight: bold; }
    .highlight .m { color: var(--chart-2); }
    .highlight .s { color: var(--chart-3); }
    .highlight .na { color: var(--chart-4); }
    .highlight .nb { color: var(--chart-2); }
    .highlight .nc { color: var(--chart-4); font-weight: bold; }
    .highlight .no { color: var(--chart-2); }
    .highlight .ni { color: var(--chart-1); }
    .highlight .ne { color: var(--chart-5); font-weight: bold; }
    .highlight .nf { color: var(--chart-4); font-weight: bold; }
    .highlight .nn { color: var(--muted); }
    .highlight .nt { color: var(--chart-1); }
    .highlight .nv { color: var(--chart-2); }
    .highlight .ow { font-weight: normal; color: var(--chart-1); }
    .highlight .w { color: var(--muted); }
    .highlight .mf { color: var(--chart-2); }
    .highlight .mh { color: var(--chart-2); }
    .highlight .mi { color: var(--chart-2); }
    .highlight .mo { color: var(--chart-2); }
    .highlight .sb { color: var(--chart-3); }
    .highlight .sc { color: var(--chart-3); }
    .highlight .sd { color: var(--chart-3); }
    .highlight .s2 { color: var(--chart-3); }
    .highlight .se { color: var(--chart-3); }
    .highlight .sh { color: var(--chart-3); }
    .highlight .si { color: var(--chart-3); }
    .highlight .sx { color: var(--chart-3); }
    .highlight .sr { color: var(--chart-1); }
    .highlight .s1 { color: var(--chart-3); }
    .highlight .dl { color: var(--chart-3); }
    .highlight .ss { color: var(--chart-1); }
    .highlight .bp { color: var(--chart-2); }
    .highlight .vc { color: var(--chart-2); }
    .highlight .vg { color: var(--chart-2); }
    .highlight .vi { color: var(--chart-2); }
    .highlight .il { color: var(--chart-2); }

    /* ========================================
       CALLOUT STYLING - Migrated from _sass/_callouts.scss
       Obsidian-style callouts with type variants
       ======================================== */

    .callout {
        margin: 1.5rem 0;
        padding: 0;
        border-radius: var(--radius-md);
        overflow: hidden;
        background: var(--surface);
        border: 1px solid var(--border);
        border-left-width: 1px;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    }

    .callout .callout-title {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.75rem 1rem;
        font-weight: 600;
        font-family: var(--font-mono);
        background: var(--background);
        border-bottom: 1px solid var(--border);
        font-size: 0.9em;
        letter-spacing: 0.02em;
        text-transform: inherit;
    }

    .callout .callout-icon {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 20px;
        height: 20px;
        flex-shrink: 0;
        font-style: normal;
        font-size: x-large;
    }

    .callout .callout-title-inner {
        flex: 1;
    }

    .callout .callout-content {
        padding: 1rem 1.25rem;
        font-family: var(--font-prose);
        font-style: italic;
        color: var(--foreground);
        line-height: 1.6;
        font-size: 1rem;
    }

    .callout .callout-content p:first-child {
        margin-top: 0;
    }

    .callout .callout-content p:last-child {
        margin-bottom: 0;
    }

    .callout .callout-content code {
        background: var(--background);
        border-color: var(--border);
    }

    .callout .callout-content ul,
    .callout .callout-content ol {
        padding-left: 1.5rem;
        margin: 0.5rem 0;
    }

    .callout .callout-content ul li,
    .callout .callout-content ol li {
        margin-bottom: 0.25rem;
        line-height: 1.5;
        font-style: normal;
    }

    .callout .callout-content ul li::before {
        content: "‚Ä¢";
        color: var(--chart-2);
        position: absolute;
        left: -1rem;
        font-weight: bold;
    }

    /* Callout Type Variants */

    /* 1. Info / Note (Blue) */
    .callout[data-callout="note"] .callout-title,
    .callout[data-callout="info"] .callout-title,
    .callout[data-callout="todo"] .callout-title {
        color: #6ab0ff;
    }

    .callout[data-callout="note"] .callout-icon::before,
    .callout[data-callout="info"] .callout-icon::before,
    .callout[data-callout="todo"] .callout-icon::before {
        content: "‚Ñπ";
    }

    .callout[data-callout="note"] .callout-icon::before {
        content: "‚úé";
    }

    .callout[data-callout="todo"] .callout-icon::before {
        content: "‚òê";
    }

    /* 2. Abstract / Summary (Cyan/Teal) */
    .callout[data-callout="abstract"] .callout-title,
    .callout[data-callout="summary"] .callout-title,
    .callout[data-callout="tldr"] .callout-title {
        color: #00d4ff;
    }

    .callout[data-callout="abstract"] .callout-icon::before,
    .callout[data-callout="summary"] .callout-icon::before,
    .callout[data-callout="tldr"] .callout-icon::before {
        content: "‚ö°";
    }

    /* 3. Tip / Success (Emerald/Green) */
    .callout[data-callout="tip"] .callout-title,
    .callout[data-callout="hint"] .callout-title,
    .callout[data-callout="important"] .callout-title,
    .callout[data-callout="success"] .callout-title,
    .callout[data-callout="check"] .callout-title,
    .callout[data-callout="done"] .callout-title {
        color: #50c878;
    }

    .callout[data-callout="tip"] .callout-icon::before,
    .callout[data-callout="hint"] .callout-icon::before,
    .callout[data-callout="important"] .callout-icon::before {
        content: "üî•";
    }

    .callout[data-callout="success"] .callout-icon::before,
    .callout[data-callout="check"] .callout-icon::before,
    .callout[data-callout="done"] .callout-icon::before {
        content: "‚úì";
    }

    /* 4. Question / Help (Amber/Yellow) */
    .callout[data-callout="question"] .callout-title,
    .callout[data-callout="help"] .callout-title,
    .callout[data-callout="faq"] .callout-title {
        color: #ffaa00;
    }

    .callout[data-callout="question"] .callout-icon::before,
    .callout[data-callout="help"] .callout-icon::before,
    .callout[data-callout="faq"] .callout-icon::before {
        content: "?";
    }

    /* 5. Warning / Caution (Orange) */
    .callout[data-callout="warning"] .callout-title,
    .callout[data-callout="caution"] .callout-title,
    .callout[data-callout="attention"] .callout-title {
        color: #ff8533;
    }

    .callout[data-callout="warning"] .callout-icon::before,
    .callout[data-callout="caution"] .callout-icon::before,
    .callout[data-callout="attention"] .callout-icon::before {
        content: "‚ö†";
    }

    /* 6. Failure / Error / Bug (Red/Destructive) */
    .callout[data-callout="failure"] .callout-title,
    .callout[data-callout="fail"] .callout-title,
    .callout[data-callout="missing"] .callout-title,
    .callout[data-callout="error"] .callout-title,
    .callout[data-callout="bug"] .callout-title {
        color: #ff4466;
    }

    .callout[data-callout="failure"] .callout-icon::before,
    .callout[data-callout="fail"] .callout-icon::before,
    .callout[data-callout="missing"] .callout-icon::before,
    .callout[data-callout="error"] .callout-icon::before,
    .callout[data-callout="bug"] .callout-icon::before {
        content: "‚úó";
    }

    /* 7. Example (Purple) */
    .callout[data-callout="example"] .callout-title {
        color: #b37de8;
    }

    .callout[data-callout="example"] .callout-icon::before {
        content: "‚óà";
    }

    /* 8. Quote / Cite (Muted/Grey) */
    .callout[data-callout="quote"] .callout-title,
    .callout[data-callout="cite"] .callout-title {
        color: var(--muted);
    }

    .callout[data-callout="quote"] .callout-icon::before,
    .callout[data-callout="cite"] .callout-icon::before {
        content: "\201C";
    }
}
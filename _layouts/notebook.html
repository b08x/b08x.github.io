---
layout: default
---

<div class="notebook-container max-w-[1800px] mx-auto px-4 sm:px-6 lg:px-8 py-8">
  <!-- Responsive Grid: Stacks on mobile, 3 columns on desktop -->
  <div class="grid grid-cols-1 lg:grid-cols-[320px_1fr_280px] xl:grid-cols-[380px_1fr_320px] gap-6">

    <!-- LEFT SIDEBAR: Source Guide -->
    <aside
      class="source-guide bg-surface rounded-lg border border-border p-6 lg:sticky lg:top-6 lg:self-start lg:max-h-[calc(100vh-3rem)] lg:overflow-y-auto">
      <h2 class="text-xl font-bold mb-4 text-foreground">Source guide</h2>

      {% if page.summary %}
      <div class="summary mb-6">
        <h3 class="text-sm font-semibold mb-2 text-foreground/90">Summary</h3>
        <p class="text-sm text-foreground/75 leading-relaxed">
          {{ page.summary }}
        </p>
      </div>
      {% endif %}

      {% if page.key_topics %}
      <div class="key-topics">
        <h3 class="text-sm font-semibold mb-2 text-foreground/90">Key Topics</h3>
        <ul class="space-y-1">
          {% for topic in page.key_topics %}
          <li class="text-sm text-foreground/75 pl-4 relative before:content-['â€¢'] before:absolute before:left-0">
            {{ topic }}
          </li>
          {% endfor %}
        </ul>
      </div>
      {% endif %}
    </aside>

    <!-- MAIN CONTENT AREA -->
    <main class="notes-and-video space-y-6">
      <!-- Notes Grid (React Island) -->
      {% assign notebook_slug = page.path | split: "/" | last | split: "." | first %}
      {% assign sub_notes = site.notes | where: "notebook_id", notebook_slug %}

      {% if sub_notes.size > 0 %}
      <div class="saved-notes">
        {% capture notes_json %}[
        {% for sn in sub_notes %}
        {
        "id": {{ sn.path | slugify | jsonify }},
        "title": {{ sn.title | jsonify }},
        "description": {{ sn.description | jsonify }},
        "url": {{ sn.url | relative_url | jsonify }},
        "citations": {{ sn.citations | default: 0 | jsonify }},
        "content": {{ sn.content | markdownify | jsonify }}
        }{% unless forloop.last %},{% endunless %}
        {% endfor %}
        ]{% endcapture %}

        {% capture notes_data %}{"notes": {{ notes_json | strip }}, "videoUrl": {{ page.video_url | jsonify }},
        "videoTitle": {{ page.video_title | jsonify }}}{% endcapture %}
        <div data-island="NotesGrid" data-props='{{ notes_data | escape }}'>
          <!-- Placeholder for React component -->
          <div class="bg-surface rounded-lg border border-border p-8 text-center">
            <span class="text-foreground/50 font-mono text-sm">Loading notes...</span>
          </div>
        </div>
      </div>
      {% endif %}

      <!-- Custom Content -->
      <div class="prose prose-sm max-w-none dark:prose-invert">
        {{ content }}
      </div>

    </main>

    <!-- RIGHT SIDEBAR: Notebook Guide -->
    <aside
      class="notebook-guide lg:sticky lg:top-6 lg:self-start lg:max-h-[calc(100vh-3rem)] lg:overflow-y-auto space-y-6">

      <!-- Help Me Create + Suggested Questions + Chat (React Island) -->
      {% assign questions = page.suggested_questions | default: empty %}
      <div data-island="NotebookGuide" data-props='{"suggestedQuestions": {{ questions | jsonify }}}'>
        <!-- Placeholder -->
        <div class="bg-surface rounded-lg border border-border p-8 text-center">
          <span class="text-foreground/50 font-mono text-sm">Loading guide...</span>
        </div>
      </div>

      <!-- Audio Overview (React Island if audio_url provided) -->
      {% if page.audio_url %}
      <div data-island="AudioPlayer"
        data-props='{"audioUrl": "{{ page.audio_url }}", "title": "{{ page.audio_title | default: page.title }}"}'>
        <!-- Placeholder -->
        <div class="bg-surface rounded-lg border border-border p-6 text-center">
          <span class="text-foreground/50 font-mono text-sm">Loading audio player...</span>
        </div>
      </div>
      {% endif %}

    </aside>

  </div>
</div>